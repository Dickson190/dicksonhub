<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Page</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="task.css">
    <link rel="stylesheet" href="fixed.css">
    <style>
        .loading-indicator {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            z-index: 1000;
        }
        .image-upload-button {
            margin-top: 10px;
            display: inline-block;
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            text-align: center;
            cursor: pointer;
            border-radius: 5px;
            text-decoration: none;
        }
    </style>
</head>
<body>
<!-- Navigation bar-->
<div class="navbar">
    <a href="#" onclick="showTasks('social')">Social Tasks</a>
    <a href="#" onclick="showTasks('business')">Business Tasks</a>
</div>
<!-- Task Content -->
<div class="content">
    <section id="social-tasks" class="task-section">
        <!-- Existing Social Tasks Here -->
        
    
        
       
<div class="task" id="social-task-task-1722086415586-562" onclick="toggleTaskDetails('social', 'task-1722086415586-562')">
    <div class="task-title">Share App</div>
    <div class="task-details" id="social-task-details-task-1722086415586-562">
        <div class="task-description">
            <img src="dig1.png" alt="Share App Icon" class="task-icon">
            <p>Ensure let others know about DicksonHub. Create an interesting content about DicksonHub platform and ensure you include this link in your Post or content.
Share post to 100 groups or platforms</p>
            <p><strong>Proof:</strong>  
            <br>
            - You must have 100 likes on post
<br>
- You must share content to 100 groups or platforms
<br>
- Ensure you copy the link of your post or content and paste here
<br>
- Screenshot your shared posts
<br>
- Type Facebook username below
</p>
            <p class="task-amount">Reward: ₦100</p>
        </div>
        <form class="submit-form" onsubmit="submitTask(event, 'social', 'social-task-task-1722086415586-562', 'Share App')">
            <label for="username">Your Username</label><input type="text" id="username" name="userName" required>
<label for="link">Link</label><input type="url" id="link" name="link" required>
<label for="screenshot">Screenshot URL</label><input type="url" id="screenshot" name="screenshot" required onclick="redirectToImageUpload('screenshot')">

            <input type="hidden" id="uniqueCodetask-1722086415586-562" name="uniqueCode">
            <input type="hidden" name="taskType" value="social">
            <input type="hidden" name="taskTitle" value="Share App">
            <button type="submit">Submit Task</button>
        </form>
    </div>
</div>
    </section>
    
    <section id="business-tasks" class="task-section" style="display: none;">
        <!-- Business Tasks Here -->
        
           <div class="task" id="business-task-task-1722084953253-153" onclick="toggleTaskDetails('business', 'task-1722084953253-153')">
    <div class="task-title">Register with my link</div>
    <div class="task-details" id="business-task-details-task-1722084953253-153">
        <div class="task-description">
            <img src="palmpay.jpg" alt="Register with my link Icon" class="task-icon">
            <p>Use my link or my code "UJYN3922" to join and get ₦1000 welcome bonus. <a href=" https://link.palmpay.com/T2BjH">Tap Here</a>. Ensure you verify your account.</p>
            <p><strong>Proof:</strong> Send screenshot of your profile 
<br>
Type your username </p>
            <p class="task-amount">Reward: ₦150</p>
        </div>
        <form class="submit-form" onsubmit="submitTask(event, 'business', 'business-task-task-1722084953253-153', 'Register with my link')">
            <label for="username">Your Username</label><input type="text" id="username" name="userName" required>
<label for="screenshot">Screenshot URL</label><input type="url" id="screenshot" name="screenshot" required onclick="redirectToImageUpload('screenshot')">

            <input type="hidden" id="uniqueCodetask-1722084953253-153" name="uniqueCode">
            <input type="hidden" name="taskType" value="business">
            <input type="hidden" name="taskTitle" value="Register with my link">
            <button type="submit">Submit Task</button>
        </form>
    </div>
</div>
        
        
<div class="task" id="business-task-task-1722085630052-473" onclick="toggleTaskDetails('business', 'task-1722085630052-473')">
    <div class="task-title">Sign up on website </div>
    <div class="task-details" id="business-task-details-task-1722085630052-473">
        <div class="task-description">
            <img src="Surveyflix.jpg" alt="Sign up on website  Icon" class="task-icon">
            <p>Use my <a href=" https://surveyflix.org/Account/Index?refCode=YHVX7HX">Referral link </a> to sign up on the specified website. Make sure to complete the sign-up process.

</p>
            <p><strong>Proof:</strong> Screenshot of your profile and type the username you used to sign up</p>
            <p class="task-amount">Reward: ₦20</p>
        </div>
        <form class="submit-form" onsubmit="submitTask(event, 'business', 'business-task-task-1722085630052-473', 'Sign up on website ')">
            <label for="username">Your Username</label><input type="text" id="username" name="userName" required>
<label for="screenshot">Screenshot URL</label><input type="url" id="screenshot" name="screenshot" required onclick="redirectToImageUpload('screenshot')">

            <input type="hidden" id="uniqueCodetask-1722085630052-473" name="uniqueCode">
            <input type="hidden" name="taskType" value="business">
            <input type="hidden" name="taskTitle" value="Sign up on website ">
            <button type="submit">Submit Task</button>
        </form>
    </div>
</div>
    
        

        
        
        
        
    </section>
</div>

<!-- Loading Indicator -->
<div class="loading-indicator" id="loading-indicator">
    <b>Submitting...</b>
</div>

<!-- Notification Box -->
<div id="notification-box" class="notification-box">
    <span class="message"></span>
    <button onclick="closeNotification()">Close</button>
</div>

 <div class="bottom-nav">
        <a href="app.html" class="nav-item"><i class="fa fa-home"></i><span>Home</span></a>
        <a href="gift.html" class="nav-item"><i class="fa fa-gift"></i><span>Claim Code</span></a>
        <a href="news.html" class="nav-item"><i class="fa fa-bell"></i><span>Notifications</span></a>
        <a href="profile.html" class="nav-item"><i class="fa fa-user"></i><span>Profile</span></a>
    </div>
   
<!-- JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function () {
    const userCode = localStorage.getItem('uniqueCode');
    const formElements = document.querySelectorAll('input[name="uniqueCode"]');
    formElements.forEach(element => element.value = userCode);

    const taskIds = [ 'social-task-task-1722086415586-562', 'social-task-703', 'business-task-task-1722084953253-153'];
    taskIds.forEach(taskId => checkTaskCompletion(taskId));
});

function checkTaskCompletion(taskId) {
    const taskCompleted = localStorage.getItem(taskId);
    if (taskCompleted === 'true') {
        document.getElementById(taskId).style.display = 'none';
    }
}

function showTasks(taskType) {
    const socialTasks = document.getElementById('social-tasks');
    const businessTasks = document.getElementById('business-tasks');

    if (taskType === 'social') {
        socialTasks.style.display = 'block';
        businessTasks.style.display = 'none';
    } else if (taskType === 'business') {
        socialTasks.style.display = 'none';
        businessTasks.style.display = 'block';
    }
}

function toggleTaskDetails(taskType, taskId) {
    const taskDetails = document.getElementById(`${taskType}-task-details-${taskId}`);
    const allDetails = document.querySelectorAll('.task-details');
    allDetails.forEach(details => details.style.display = 'none');
    taskDetails.style.display = 'block';
}

function closeNotification() {
    const notificationBox = document.getElementById('notification-box');
    notificationBox.style.display = 'none';
}

async function submitTask(event, taskType, taskId, taskTitle) {
    event.preventDefault();

    const loadingIndicator = document.getElementById('loading-indicator');
    loadingIndicator.style.display = 'block';

    const form = event.target;
    const formData = new FormData(form);

    const response = await fetch('https://sheetdb.io/api/v1/73cgrsajk741e', {
        method: 'POST',
        body: formData
    });

    loadingIndicator.style.display = 'none';

    if (response.ok) {
        localStorage.setItem(taskId, 'true');
        document.getElementById(taskId).style.display = 'none';
        showNotification('Task submitted successfully!');
    } else {
        showNotification('Failed to submit task.');
    }
}

function showNotification(message) {
    const notificationBox = document.getElementById('notification-box');
    const messageSpan = notificationBox.querySelector('.message');
    messageSpan.textContent = message;
    notificationBox.style.display = 'block';
}

let imageUploadRedirected = false;

function redirectToImageUpload(inputId) {
    if (!imageUploadRedirected) {
        if (confirm('You will be redirected to an external page to upload your image. Continue?')) {
            window.location.href = 'https://freeimage.host/';
            imageUploadRedirected = true;
        }
    }
}

</script>
</body>
</html>

<!-- Use this API key instead of the formsubt API. Use this properly into the code :
 https://sheetdb.io/api/v1/73cgrsajk741e -->